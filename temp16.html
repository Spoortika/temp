<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        let users=[]
        let useremail=""
        let username=""
        let currBalance=0
         function trans()
        {
            let str=""
            for(let i=0;i<users.length;i++)
        {
            str+=`<option value='${users[i].email}'`
        }
        }
        function savedata()
        {
            let amount=Number(document.getElementById("amount").value);
            let type=document.getElementById("type").value;
            for(let i=0;i<users.length;i++)
        {
            if(users[i].email==useremail){
                if(type=="1"){
                    users[i].balance+=amount
                }
                else if(type=="2"){
                    users[i].balance-=amount
                 if(users[i].balance<0)
                  {
                     alert("Insufficient funds!!")
                    //msg.innerHTML("Insufficient funds!")
                  }
                }
                    spBalance.innerHTML=users[i].balance
                break
            }
        }
        }
        function home(){
            let str=`
            <h2>Welcome, ${username} !</h2>
            <p><button onclick="showLogin()">Log Out</button></p>
            <p><select id="type">
                <option value=0>--Select--</option>
                <option value=1>Deposit</option>
                <option value=2>Withdraw</option>
                <option value=3>Transfer</option>
                </select></p>
                <p><select id="selectuser">
                    <option value=0>--select--</option>
                    <option value=1>p</option>
                    <option value=2>q</option>

                </select></p>
                <p><input type="number" id="amount" placeholder="Enter amount"></p>
                <button onclick="savedata()">Submit</button>
                <p>Current Balance: <span id='spBalance'${currBalance}></span></p>
            `;
            root.innerHTML=str;
        }
        function addUser()
        {
            let name=document.getElementById("name").value
            let email=document.getElementById("email").value
            let password=document.getElementById("password").value
            let dob=document.getElementById("dob").value
            let user={
                name:name,
                email:email,
                password:password,
                dob:dob,
                balance:0
            };
            users.push(user)
            showLogin();
        }
         function showRegistration(){
            let str =`
            <div>
                <h2>Create your Account</h2>
                <input type="text" id="name" placeholder="username"><br><br>
                <input type="text" id="email" placeholder="email address"><br><br>
                <input type="password" id="password" placeholder="password"><br><br>
                <input type="date" id="dob" >
                <p><button onclick="addUser()">Create account</button></p>
                <p><button onclick="showLogin()">Already a member? Log In here</button></p>
            </div>
            `
        root.innerHTML=str
        }
        function showLogin(){
            let str =`
            <div>
                <h2>Login Form</h2>
                <div id='msg'></div>
                <p><input id="email" type="text" ></p>
                <p><input id="password" type="password"></p>
                <button onclick="shownew()">Log In</button>
                <p><button onclick="showRegistration()">Create an account</button></p>
            </div>
            `;
            root.innerHTML=str;
        }
        function shownew()
        {
            let email=document.getElementById("email").value;
            let password=document.getElementById("password").value;
            for(let i=0;i<users.length;i++)
        {
            if(users[i].email==email && users[i].password==password)
            {
                useremail=email
                username=users[i].name
                currBalance=users[i].balance
            home();
            break;
        }
        else
        {
            msg.innerHTML="Access Denied"
        }
        }
    }
           
    </script>
</head>
<body onload="showLogin()">
    <h1>State Bank of India</h1>
    <hr />
    <div id="root"></div>
    <hr />
    <h3>Copyrights reserved. yoursbi<3 </h3>
</body>
</html>